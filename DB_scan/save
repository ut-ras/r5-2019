color:

found_id = []
found_id = [mask[row][col]
    for row in range(0, HEIGHT)
    for col in range(0, WIDTH)
    if mask[row][col] not in found_id]

# for row in range(0, HEIGHT):
#     for col in range(0, WIDTH):
#         if mask[row][col] not in found_id:
#             found_id.append(mask[row][col])

merge_ref:

min_id = min(found_id)
for i in range(position[0] * WIDTH + position[1]):
    if mask[i / WIDTH][i % WIDTH]:
        mask[i / WIDTH][i % WIDTH] = min_id

separate:

masks = []
for id in found_id:
    mask = []
    for y, row in enumerate(mask):
        for x, col in enumerate(row):
            if col == id:
                mask[y][x] = 255
            else:
                mask[y][x] = 0
    masks.append(mask)


[255 if col == id else 0 for x in range(0, WIDTH)] for y in range(0, HEIGHT)
